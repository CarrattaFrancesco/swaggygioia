/* CRT Container with all effects */
#crt-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: radial-gradient(ellipse at center, #0a0015 0%, #000000 100%);
    overflow: hidden;
    z-index: 9999;
}

/* Retro 90s Loading Screen */
#loadingScreen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #0a0015;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: opacity 0.8s ease-out, visibility 0.8s ease-out;
    overflow: hidden;
    animation: flicker 5s infinite;
    transform: perspective(1000px) rotateX(0deg);
    transform-style: preserve-3d;
}

#loadingScreen.hidden {
    opacity: 0;
    visibility: hidden;
}

#crt-container.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

/* CRT Screen Curvature */
#crt-container::before {
    content: '';
    position: absolute;
    top: -10%;
    left: -10%;
    width: 120%;
    height: 120%;
    background: radial-gradient(ellipse at center, transparent 0%, transparent 60%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0.8) 100%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" /></filter><rect width="100" height="100" filter="url(%23noise)" opacity="0.05"/></svg>');
    pointer-events: none;
    z-index: 10;
    animation: noise 0.2s infinite;
}

/* Strong Scanlines */
#crt-container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.15) 0px,
        rgba(0, 0, 0, 0.15) 1px,
        transparent 1px,
        transparent 2px
    );
    pointer-events: none;
    z-index: 8;
    animation: scanlines 8s linear infinite;
}

@keyframes scanlines {
    0% { transform: translateY(0); }
    100% { transform: translateY(2px); }
}

/* CRT Screen Flicker */
@keyframes flicker {
    0% { opacity: 0.97; }
    2% { opacity: 0.94; }
    4% { opacity: 0.97; }
    19% { opacity: 0.97; }
    21% { opacity: 0.94; }
    23% { opacity: 0.96; }
    80% { opacity: 0.97; }
    83% { opacity: 0.93; }
    87% { opacity: 0.97; }
}

@keyframes noise {
    0%, 100% { opacity: 0.9; }
    50% { opacity: 0.95; }
}

/* RGB Chromatic Aberration */
.loader-content {
    text-align: center;
    color: white;
    position: relative;
    z-index: 5;
    filter: drop-shadow(2px 0 0 rgba(255, 0, 0, 0.3)) 
            drop-shadow(-2px 0 0 rgba(0, 255, 255, 0.3));
}

.loader-title {
    font-size: clamp(28px, 8vw, 56px);
    font-weight: bold;
    margin-bottom: clamp(30px, 8vh, 60px);
    letter-spacing: clamp(4px, 1vw, 8px);
    text-transform: uppercase;
    color: #94ffe3;
    text-shadow: 
        2px 0 3px rgba(255, 0, 0, 0.5),
        -2px 0 3px rgba(0, 255, 255, 0.5),
        0 0 10px #94ffe3,
        0 0 20px #94ffe3,
        0 0 30px #7702ef,
        0 0 40px #7702ef;
    font-family: 'Courier New', monospace;
    animation: titleGlow 2s ease-in-out infinite alternate, rgbShift 0.3s infinite;
    padding: 0 20px;
}

@keyframes titleGlow {
    0% { 
        text-shadow: 
            2px 0 3px rgba(255, 0, 0, 0.5),
            -2px 0 3px rgba(0, 255, 255, 0.5),
            0 0 10px #94ffe3,
            0 0 20px #94ffe3,
            0 0 30px #7702ef,
            0 0 40px #7702ef;
    }
    100% { 
        text-shadow: 
            2px 0 3px rgba(255, 0, 0, 0.5),
            -2px 0 3px rgba(0, 255, 255, 0.5),
            0 0 20px #94ffe3,
            0 0 30px #94ffe3,
            0 0 40px #7702ef,
            0 0 60px #7702ef,
            0 0 80px #7702ef;
    }
}

@keyframes rgbShift {
    0% { filter: drop-shadow(2px 0 0 rgba(255, 0, 0, 0.3)) drop-shadow(-2px 0 0 rgba(0, 255, 255, 0.3)); }
    50% { filter: drop-shadow(3px 0 0 rgba(255, 0, 0, 0.4)) drop-shadow(-3px 0 0 rgba(0, 255, 255, 0.4)); }
    100% { filter: drop-shadow(2px 0 0 rgba(255, 0, 0, 0.3)) drop-shadow(-2px 0 0 rgba(0, 255, 255, 0.3)); }
}

.loader-text {
    font-size: clamp(14px, 3vw, 20px);
    margin-bottom: clamp(20px, 5vh, 40px);
    letter-spacing: clamp(2px, 0.5vw, 3px);
    text-transform: uppercase;
    font-family: 'Courier New', monospace;
    color: #94ffe3;
    text-shadow: 
        1px 0 2px rgba(255, 0, 0, 0.4),
        -1px 0 2px rgba(0, 255, 255, 0.4),
        0 0 10px #94ffe3;
    animation: textBlink 1.5s ease-in-out infinite;
    padding: 0 20px;
}

@keyframes textBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.loader-progress {
    width: clamp(280px, 80vw, 500px);
    height: clamp(40px, 8vh, 60px);
    background: #000000;
    border: 4px solid #7702ef;
    box-shadow: 
        0 0 20px #7702ef,
        inset 0 0 20px rgba(119, 2, 239, 0.3),
        2px 0 5px rgba(255, 0, 0, 0.3),
        -2px 0 5px rgba(0, 255, 255, 0.3);
    margin: 20px auto;
    overflow: hidden;
    position: relative;
    border-radius: 8px;
}

.loader-progress::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
        90deg,
        transparent 0px,
        transparent calc(14.285% - 3px),
        #0a0015 calc(14.285% - 3px),
        #0a0015 14.285%
    );
    pointer-events: none;
    z-index: 2;
}

.loader-progress-bar {
    height: 100%;
    background: #94ffe3;
    width: 0%;
    transition: width 0.3s ease;
    box-shadow: 
        0 0 30px #94ffe3,
        0 0 40px #94ffe3,
        inset 0 0 20px rgba(148, 255, 227, 0.5),
        2px 0 10px rgba(255, 0, 0, 0.2),
        -2px 0 10px rgba(0, 255, 255, 0.2);
    position: relative;
    z-index: 1;
    animation: phosphorGlow 2s ease-in-out infinite;
}

/* Phosphor glow animation */
@keyframes phosphorGlow {
    0%, 100% { 
        box-shadow: 
            0 0 30px #94ffe3,
            0 0 40px #94ffe3,
            inset 0 0 20px rgba(148, 255, 227, 0.5);
    }
    50% { 
        box-shadow: 
            0 0 40px #94ffe3,
            0 0 50px #94ffe3,
            inset 0 0 30px rgba(148, 255, 227, 0.7);
    }
}

.loader-percentage {
    font-size: clamp(24px, 5vw, 32px);
    font-weight: bold;
    margin-top: clamp(20px, 4vh, 30px);
    letter-spacing: clamp(2px, 0.6vw, 4px);
    font-family: 'Courier New', monospace;
    color: #7702ef;
    text-shadow: 
        1px 0 3px rgba(255, 0, 0, 0.5),
        -1px 0 3px rgba(0, 255, 255, 0.5),
        0 0 15px #7702ef;
}

/* Floating particles effect */
.particles {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
    pointer-events: none;
    z-index: 1;
}

.particle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: #94ffe3;
    box-shadow: 
        0 0 5px #94ffe3,
        1px 0 2px rgba(255, 0, 0, 0.5),
        -1px 0 2px rgba(0, 255, 255, 0.5);
    animation: float 15s infinite;
}

@keyframes float {
    0%, 100% {
        transform: translateY(0) translateX(0);
        opacity: 0;
    }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% {
        transform: translateY(-100vh) translateX(100px);
        opacity: 0;
    }
}
